# üìñ SLL (Simple Lazy Language) ‚Äî –º–æ–¥–µ–ª—å–Ω—ã–π —è–∑—ã–∫

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å—É–ø–µ—Ä–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:
- –ª–µ–∫—Å–µ—Ä –∏ –ø–∞—Ä—Å–µ—Ä (LL(1)/—Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Å–ø—É—Å–∫),
- AST –∏ pretty-printer,
- –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (**Type Checking**): –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, –∞—Ä–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º —Ñ—É–Ω–∫—Ü–∏–π,
- –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –≤ ¬´core¬ª-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —ç—Ç–∞–ø–∞ —Å—É–ø–µ—Ä–∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞
- **–§—É–Ω–∫—Ü–∏–∏** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `fun`, —Å **–ø–æ–ª–Ω–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π —Ç–∏–ø–æ–≤** (–∫–æ—Ç–æ—Ä–∞—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏, –Ω–æ –≤–∞–∂–Ω–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞).
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `type`.
- **–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π** –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫—Ä—É–≥–ª—ã—Ö —Å–∫–æ–±–∫–∞—Ö: `(fun arg1 arg2 ...)`.
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã** –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö: `[Cons x xs]`.
- **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –æ–±—Ä–∞–∑—Ü–æ–º** —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ –ø–µ—Ä–≤–æ–º—É –∞—Ä–≥—É–º–µ–Ω—Ç—É —Ñ—É–Ω–∫—Ü–∏–∏.
- **–ß–∏—Å–ª–∞**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã (`0`, `1`, `42`) –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö, –Ω–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—á–∏—Å–ª–∞ –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã).
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã (`x`, `xs`).

---

## üíª –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã

```text
<< –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ >>
type [List a] : Cons a [List a] | Nil.

<< –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª >>
type [Nat] : Z | S [Nat].

<< –§–∏–∫—Ç–∏–≤–Ω—ã–π —Ç–∏–ø –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª >>
type [Int] : .

<< –§—É–Ω–∫—Ü–∏—è —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ (–ü–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è) >>
fun (append [List a] [List a]) -> [List a] :
    (append [Cons x xs] ys) -> [Cons x (append xs ys)] |
    (append [Nil] ys) -> ys.

<< –§—É–Ω–∫—Ü–∏—è —Å —á–∏—Å–ª–∞–º–∏ >>
fun (isZero [Int]) -> [Nat] :
    (isZero 0) -> [S [Z]]  << 1 (True) >> |
    (isZero x) -> [Z].     << 0 (False) >>
```

## üî§ –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ (EBNF)

```ebnf
Module      ::= { TypeDecl | FunDecl }

TypeDecl    ::= "type" TypeHead ":" AltList "."
TypeHead    ::= "[" ConstrName { TypeVar } "]"                 // [List x], [Pair x y]
AltList     ::= Alt { "|" Alt }
Alt         ::= ConstrName { TypeField }                       // Cons x [List x] | Nil
TypeField   ::= TypeVar | TypeAnnot

FunDecl     ::= "fun" FunSig ":" ClauseList "."
FunSig      ::= "(" FunName { TypeAnnot } ")" "->" TypeAnnot
ClauseList  ::= Clause { "|" Clause }
Clause      ::= "(" Pattern ")" "->" Expr

Pattern     ::= FunName { PatAtom }                            // (append [Cons x xs] ys)
PatAtom     ::= Var | "[" ConstrName { PatAtom } "]"           // —á–∏—Å–µ–ª –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö –Ω–µ—Ç

Expr        ::= Var
             | "(" FunName { Expr } ")"                        // –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
             | "[" ConstrName { Expr } "]"                     // –∑–Ω–∞—á–µ–Ω–∏–µ-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
             | IntLit                                          // —á–∏—Å–ª–æ–≤–æ–π –ª–∏—Ç–µ—Ä–∞–ª: 0, 1, 42

TypeAnnot   ::= "[" TypeTerm "]"
TypeTerm    ::= TypeVar | ConstrName { TypeAnnot }

Var         ::= lcIdent
FunName     ::= lcIdent
ConstrName  ::= ucIdent
TypeVar     ::= lcIdent
